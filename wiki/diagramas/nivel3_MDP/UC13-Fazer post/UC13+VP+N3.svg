<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="656px" preserveAspectRatio="none" style="width:1709px;height:656px;background:#FFFFFF;" version="1.1" viewBox="0 0 1709 656" width="1709px" zoomAndPan="magnify"><defs><filter height="300%" id="f1sqgbmzrnqbq6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="519.9531" style="stroke:#A80036;stroke-width:1.0;" width="10" x="172" y="73.9609"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="459.25" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="104.3125"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="398.5469" style="stroke:#A80036;stroke-width:1.0;" width="10" x="492" y="134.6641"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="198.0156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="740" y="211.625"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="893" y="241.9766"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="893" y="379.2891"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="893" y="456.25"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1294" y="318.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="177" x2="177" y1="41.6094" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="337" x2="337" y1="41.6094" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="496.5" x2="496.5" y1="41.6094" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="637" x2="637" y1="175.9688" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="745" x2="745" y1="41.6094" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="897.5" x2="897.5" y1="41.6094" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1070" x2="1070" y1="283.2813" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1299" x2="1299" y1="41.6094" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1493" x2="1493" y1="420.5938" y2="611.9141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1628" x2="1628" y1="497.5547" y2="611.9141"/><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="84" x="133" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="140" y="26.5332">:PostRoute</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="84" x="133" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="140" y="632.4473">:PostRoute</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="108" x="281" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="288" y="26.5332">:PostController</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="108" x="281" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="288" y="632.4473">:PostController</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="448.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="455.5" y="26.5332">:PostService</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="448.5" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="455.5" y="632.4473">:PostService</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="599" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="606" y="632.4473">post:Post</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="114" x="686" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="693" y="26.5332">:PostRepository</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="114" x="686" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="693" y="632.4473">:PostRepository</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="859.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="866.5" y="26.5332">:PostMap</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="859.5" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="866.5" y="632.4473">:PostMap</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="172" x="982" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="989" y="632.4473">postPer:IPostPersistence</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="258" x="1168" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244" x="1175" y="26.5332">:Model&lt;IPostPersistence &amp; Document&gt;</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="258" x="1168" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244" x="1175" y="632.4473">:Model&lt;IPostPersistence &amp; Document&gt;</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="103" x="1440" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1447" y="632.4473">newPost: Post</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="138" x="1557" y="610.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1564" y="632.4473">newDTO: IPostDTO</text><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="519.9531" style="stroke:#A80036;stroke-width:1.0;" width="10" x="172" y="73.9609"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="459.25" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="104.3125"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="398.5469" style="stroke:#A80036;stroke-width:1.0;" width="10" x="492" y="134.6641"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="198.0156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="740" y="211.625"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="893" y="241.9766"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="893" y="379.2891"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="893" y="456.25"/><rect fill="#FFFFFF" filter="url(#f1sqgbmzrnqbq6)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1294" y="318.9375"/><ellipse cx="4.5" cy="73.2109" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="160,69.9609,170,73.9609,160,77.9609,164,73.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="9" x2="166" y1="73.9609" y2="73.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="69.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="23" y="69.1045">POST(.../api/posts,req)</text><polygon fill="#A80036" points="320,100.3125,330,104.3125,320,108.3125,324,104.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="182" x2="326" y1="104.3125" y2="104.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="189" y="99.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="200" y="99.4561">createPost(req)</text><polygon fill="#A80036" points="480,130.6641,490,134.6641,480,138.6641,484,134.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342" x2="486" y1="134.6641" y2="134.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="349" y="129.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="360" y="129.8076">createPost(dto)</text><polygon fill="#A80036" points="587,161.0156,597,165.0156,587,169.0156,591,165.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="502" x2="593" y1="165.0156" y2="165.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="509" y="160.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="520" y="160.1592">create(dto)</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="599" y="142.6641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="606" y="164.1973">post:Post</text><polygon fill="#A80036" points="728,207.625,738,211.625,728,215.625,732,211.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="502" x2="734" y1="211.625" y2="211.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="509" y="206.7686">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="520" y="206.7686">save(post)</text><polygon fill="#A80036" points="881,237.9766,891,241.9766,881,245.9766,885,241.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="750" x2="887" y1="241.9766" y2="241.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="757" y="237.1201">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="768" y="237.1201">toPersistence(post)</text><polygon fill="#A80036" points="970,268.3281,980,272.3281,970,276.3281,974,272.3281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="898" x2="976" y1="272.3281" y2="272.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="905" y="267.4717">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="916" y="267.4717">create()</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="172" x="982" y="249.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="989" y="271.5098">postPer:IPostPersistence</text><polygon fill="#A80036" points="1282,314.9375,1292,318.9375,1282,322.9375,1286,318.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="750" x2="1288" y1="318.9375" y2="318.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="757" y="314.0811">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="768" y="314.0811">create(postPer)</text><polygon fill="#A80036" points="881,375.2891,891,379.2891,881,383.2891,885,379.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="750" x2="887" y1="379.2891" y2="379.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="757" y="374.4326">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="768" y="374.4326">toDomain(postPer)</text><polygon fill="#A80036" points="1428,405.6406,1438,409.6406,1428,413.6406,1432,409.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="898" x2="1434" y1="409.6406" y2="409.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="905" y="404.7842">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="923" y="404.7842">create()</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="103" x="1440" y="387.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1447" y="408.8223">newPost: Post</text><polygon fill="#A80036" points="881,452.25,891,456.25,881,460.25,885,456.25" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="502" x2="887" y1="456.25" y2="456.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="509" y="451.3936">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="527" y="451.3936">toDTO(newPost)</text><polygon fill="#A80036" points="1545,482.6016,1555,486.6016,1545,490.6016,1549,486.6016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="898" x2="1551" y1="486.6016" y2="486.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="905" y="481.7451">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="923" y="481.7451">create()</text><rect fill="#FEFECE" filter="url(#f1sqgbmzrnqbq6)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="138" x="1557" y="464.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1564" y="485.7832">newDTO: IPostDTO</text><polygon fill="#A80036" points="353,529.2109,343,533.2109,353,537.2109,349,533.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="347" x2="496" y1="533.2109" y2="533.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="359" y="528.3545">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="377" y="528.3545">Success(newDTO)</text><polygon fill="#A80036" points="193,559.5625,183,563.5625,193,567.5625,189,563.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187" x2="336" y1="563.5625" y2="563.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="199" y="558.7061">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="217" y="558.7061">Success(newDTO)</text><polygon fill="#A80036" points="11,589.9141,1,593.9141,11,597.9141,7,593.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="176" y1="593.9141" y2="593.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="589.0576">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="35" y="589.0576">Success(newDTO)</text><!--MD5=[5b1ecf475ca9154ed1f43b67c84ca8a6]
@startuml

autonumber

participant ":PostRoute" as R
participant ":PostController" as CTRL
participant ":PostService" as SERV
participant "post:Post" as P
participant ":PostRepository" as REPO
participant ":PostMap" as MAP
participant "postPer:IPostPersistence" as PP
participant ":Model<IPostPersistence & Document>" as MPP
participant "newPost: Post" as NP
participant "newDTO: IPostDTO" as DTO

?o->R : POST(.../api/posts,req)
activate R
    R->CTRL: createPost(req)
    activate CTRL
        CTRL->SERV: createPost(dto)
        activate SERV
            SERV-> P**: create(dto)
            SERV-> REPO: save(post)
            activate REPO
                REPO->MAP: toPersistence(post)
                activate MAP
                    MAP->PP**: create()
                deactivate MAP
                REPO->MPP: create(postPer)
                activate MPP
                deactivate MPP
                REPO->MAP: toDomain(postPer)
                activate MAP
                    MAP->NP**: create()
                deactivate MAP  
            deactivate REPO
            SERV-> MAP: toDTO(newPost)
            activate MAP
                MAP-> DTO**: create()
            deactivate MAP
            SERV- -> CTRL : Success(newDTO)
        deactivate SERV
        CTRL- ->R: Success(newDTO)
    deactivate CTRL
    <- -R: Success(newDTO)
deactivate R
@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>