<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="515px" preserveAspectRatio="none" style="width:1721px;height:515px;background:#FFFFFF;" version="1.1" viewBox="0 0 1721 515" width="1721px" zoomAndPan="magnify"><defs><filter height="300%" id="fpvm7k0xe3yl0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="379.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="244" y="73.9609"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="318.3672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="525" y="104.3125"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="750" y="134.6641"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="750" y="195.0156"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1333" y="255.3672"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1545" y="315.7188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="248.5" x2="248.5" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="529.5" x2="529.5" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="755" x2="755" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="915" x2="915" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1054" x2="1054" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1196" x2="1196" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1338" x2="1338" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1456" x2="1456" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1550" x2="1550" y1="41.6094" y2="471.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1659" x2="1659" y1="387.0234" y2="471.0313"/><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="181" x="156.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="163.5" y="26.5332">:PedidosLigacaoController</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="181" x="156.5" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="163.5" y="491.5645">:PedidosLigacaoController</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="159" x="448.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="455.5" y="26.5332">:PedidoLigacaoService</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="159" x="448.5" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="455.5" y="491.5645">:PedidoLigacaoService</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="180" x="663" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="670" y="26.5332">:PedidoLigacaoRepository</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="180" x="663" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="670" y="491.5645">:PedidoLigacaoRepository</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="112" x="857" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="864" y="26.5332">:PedidoLigacao</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="112" x="857" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="864" y="491.5645">:PedidoLigacao</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="139" x="983" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="990" y="26.5332">:RelacoesController</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="139" x="983" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="990" y="491.5645">:RelacoesController</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1136" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1143" y="26.5332">:RelacaoService</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1136" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1143" y="491.5645">:RelacaoService</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="138" x="1267" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1274" y="26.5332">:RelacaoRepository</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="138" x="1267" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1274" y="491.5645">:RelacaoRepository</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="70" x="1419" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1426" y="26.5332">:Relacao</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="70" x="1419" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1426" y="491.5645">:Relacao</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="90" x="1503" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="1510" y="26.5332">:UnitOfWork</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="90" x="1503" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="1510" y="491.5645">:UnitOfWork</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="100" x="1607" y="470.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1614" y="491.5645">:RelacaoDTO</text><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="379.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="244" y="73.9609"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="318.3672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="525" y="104.3125"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="750" y="134.6641"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="750" y="195.0156"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1333" y="255.3672"/><rect fill="#FFFFFF" filter="url(#fpvm7k0xe3yl0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1545" y="315.7188"/><ellipse cx="4.5" cy="73.2109" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="232,69.9609,242,73.9609,232,77.9609,236,73.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="9" x2="238" y1="73.9609" y2="73.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="69.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="23" y="69.1045">DELETE (.../api/PedidoLigacao,dto)</text><polygon fill="#A80036" points="513,100.3125,523,104.3125,513,108.3125,517,104.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="254" x2="519" y1="104.3125" y2="104.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="261" y="99.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="272" y="99.4561">DeleteAsync(pedidoLigacaoId,relacaoDto)</text><polygon fill="#A80036" points="738,130.6641,748,134.6641,738,138.6641,742,134.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="535" x2="744" y1="134.6641" y2="134.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="542" y="129.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="553" y="129.8076">GetByIdAsync(pedidoLigacaoId)</text><polygon fill="#A80036" points="738,191.0156,748,195.0156,738,199.0156,742,195.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="535" x2="744" y1="195.0156" y2="195.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="542" y="190.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="553" y="190.1592">Remove(pedidoLigacao)</text><polygon fill="#A80036" points="1321,251.3672,1331,255.3672,1321,259.3672,1325,255.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="535" x2="1327" y1="255.3672" y2="255.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="542" y="250.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="553" y="250.5107">AddAsync(relacao)</text><polygon fill="#A80036" points="1533,311.7188,1543,315.7188,1533,319.7188,1537,315.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="535" x2="1539" y1="315.7188" y2="315.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="542" y="310.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="553" y="310.8623">CommitAsync()</text><polygon fill="#A80036" points="1595,372.0703,1605,376.0703,1595,380.0703,1599,376.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="535" x2="1601" y1="376.0703" y2="376.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="542" y="371.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="553" y="371.2139">create()</text><rect fill="#FEFECE" filter="url(#fpvm7k0xe3yl0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="100" x="1607" y="353.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1614" y="375.252">:RelacaoDTO</text><polygon fill="#A80036" points="265,418.6797,255,422.6797,265,426.6797,261,422.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="259" x2="529" y1="422.6797" y2="422.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="271" y="417.8232">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="282" y="417.8232">Sucesso(novoDTO)</text><ellipse cx="7.5" cy="452.2813" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="24.5,449.0313,14.5,453.0313,24.5,457.0313,20.5,453.0313" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="237,449.0313,247,453.0313,237,453.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="22.5" x2="248" y1="453.0313" y2="453.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="25" y="448.1748">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="36" y="448.1748">Sucesso(novoDTO)</text><!--MD5=[18ba3f2f4628c607b2410777e0c53d23]
@startuml
autonumber

participant ":PedidosLigacaoController" as CTRL1
participant ":PedidoLigacaoService" as S1
participant ":PedidoLigacaoRepository" as REPO1
participant ":PedidoLigacao" as R1
participant ":RelacoesController" as CTRL
participant ":RelacaoService" as S
participant ":RelacaoRepository" as REPO
participant ":Relacao" as R
participant ":UnitOfWork" as UOW
participant ":RelacaoDTO" as DTO


?o-> CTRL1 : DELETE (.../api/PedidoLigacao,dto)
activate CTRL1
    CTRL1 -> S1: DeleteAsync(pedidoLigacaoId,relacaoDto)
    activate S1
        S1 -> REPO1: GetByIdAsync(pedidoLigacaoId)
                activate REPO1
                deactivate REPO1
        S1 -> REPO1: Remove(pedidoLigacao)
        activate REPO1
        deactivate REPO1
        S1 -> REPO: AddAsync(relacao)
                activate REPO
                deactivate REPO
                S1-> UOW: CommitAsync()
                activate UOW
                deactivate UOW
                S1-> DTO **:  create()
            S1- ->CTRL1 : Sucesso(novoDTO)
            deactivate S1
            [o<-\ CTRL1: Sucesso(novoDTO)
deactivate CTRL1


@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>