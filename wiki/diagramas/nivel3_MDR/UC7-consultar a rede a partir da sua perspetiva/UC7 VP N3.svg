<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="455px" preserveAspectRatio="none" style="width:896px;height:455px;background:#FFFFFF;" version="1.1" viewBox="0 0 896 455" width="896px" zoomAndPan="magnify"><defs><filter height="300%" id="fsq6d33z1jtvi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="319.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="188" y="73.9609"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="258.3672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="344" y="104.3125"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="508" y="134.6641"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="626" y="195.0156"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="720" y="255.7188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="192.5" x2="192.5" y1="41.6094" y2="411.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="348.5" x2="348.5" y1="41.6094" y2="411.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="513" x2="513" y1="41.6094" y2="411.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="631" x2="631" y1="41.6094" y2="411.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="725" x2="725" y1="41.6094" y2="411.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="834" x2="834" y1="327.0234" y2="411.0313"/><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="139" x="121.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="128.5" y="26.5332">:RelacoesController</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="139" x="121.5" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="128.5" y="431.5645">:RelacoesController</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="288.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="295.5" y="26.5332">:RelacaoService</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="288.5" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="295.5" y="431.5645">:RelacaoService</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="138" x="442" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="449" y="26.5332">:RelacaoRepository</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="138" x="442" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="449" y="431.5645">:RelacaoRepository</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="70" x="594" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="601" y="26.5332">:Relacao</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="70" x="594" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="601" y="431.5645">:Relacao</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="90" x="678" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="685" y="26.5332">:UnitOfWork</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="90" x="678" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="685" y="431.5645">:UnitOfWork</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="100" x="782" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="789" y="431.5645">:RelacaoDTO</text><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="319.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="188" y="73.9609"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="258.3672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="344" y="104.3125"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="508" y="134.6641"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="626" y="195.0156"/><rect fill="#FFFFFF" filter="url(#fsq6d33z1jtvi)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="720" y="255.7188"/><ellipse cx="4.5" cy="73.2109" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="176,69.9609,186,73.9609,176,77.9609,180,73.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="9" x2="182" y1="73.9609" y2="73.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="69.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="23" y="69.1045">PUT (.../api/Relacoes,dto)</text><polygon fill="#A80036" points="332,100.3125,342,104.3125,332,108.3125,336,104.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="198" x2="338" y1="104.3125" y2="104.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="205" y="99.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="216" y="99.4561">UpdateAsync(dto)</text><polygon fill="#A80036" points="496,130.6641,506,134.6641,496,138.6641,500,134.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="502" y1="134.6641" y2="134.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="361" y="129.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="372" y="129.8076">GetByIdAsync(dto.Id)</text><polygon fill="#A80036" points="614,191.0156,624,195.0156,614,199.0156,618,195.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="620" y1="195.0156" y2="195.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="361" y="190.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="372" y="190.1592">AlteraForcaLigacao(dto.ForcaLigacao)</text><polygon fill="#A80036" points="619,221.3672,629,225.3672,619,229.3672,623,225.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="625" y1="225.3672" y2="225.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="361" y="220.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="372" y="220.5107">AlteraTags(dto.Tags)</text><polygon fill="#A80036" points="708,251.7188,718,255.7188,708,259.7188,712,255.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="714" y1="255.7188" y2="255.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="361" y="250.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="372" y="250.8623">CommitAsync()</text><polygon fill="#A80036" points="770,312.0703,780,316.0703,770,320.0703,774,316.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="776" y1="316.0703" y2="316.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="361" y="311.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="372" y="311.2139">create()</text><rect fill="#FEFECE" filter="url(#fsq6d33z1jtvi)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="100" x="782" y="293.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="789" y="315.252">:RelacaoDTO</text><polygon fill="#A80036" points="209,358.6797,199,362.6797,209,366.6797,205,362.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203" x2="348" y1="362.6797" y2="362.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="215" y="357.8232">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="226" y="357.8232">Sucesso(novoDTO)</text><ellipse cx="7.5" cy="392.2813" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="24.5,389.0313,14.5,393.0313,24.5,397.0313,20.5,393.0313" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="181,389.0313,191,393.0313,181,393.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="22.5" x2="192" y1="393.0313" y2="393.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="25" y="388.1748">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="36" y="388.1748">Sucesso(novoDTO)</text><!--MD5=[8aa19dd184f830b3c1137f7fbf0aadae]
@startuml
autonumber

participant ":RelacoesController" as CTRL
participant ":RelacaoService" as S
participant ":RelacaoRepository" as REPO
participant ":Relacao" as R
participant ":UnitOfWork" as UOW
participant ":RelacaoDTO" as DTO

?o-> CTRL : PUT (.../api/Relacoes,dto)
activate CTRL
    CTRL -> S: UpdateAsync(dto)
    activate S
        S -> REPO: GetByIdAsync(dto.Id)
        activate REPO
        deactivate REPO
        S -> R: AlteraForcaLigacao(dto.ForcaLigacao)
        activate R
        S -> R: AlteraTags(dto.Tags)
        deactivate R
        S-> UOW: CommitAsync()
        activate UOW
        deactivate UOW
        S-> DTO **:  create()
    S- ->CTRL : Sucesso(novoDTO)
    deactivate S
    [o<-\ CTRL: Sucesso(novoDTO)
deactivate CTRL
@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>